<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>zkd - منصة المانغا والمانهوا</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet" />
  <link rel="preconnect" href="https://ekiaasbrzkbckmtyptxw.supabase.co" />
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- شاشة التحميل -->
  <div class="splash-screen">
    <div class="logo">
      <span>zkd</span>
    </div>
  </div>

  <!-- الهيكل الرئيسي -->
  <div class="app-container">
    <!-- شريط التنقل العلوي -->
    <nav class="top-nav">
      <div class="nav-brand">
        <span>zkd</span>
      </div>
      <div class="nav-actions">
        <button class="btn-icon" data-action="open-search" title="بحث">
          <i class="ri-search-line"></i>
        </button>
        <button class="btn-icon" id="notificationsBtn" title="الإشعارات">
          <i class="ri-notification-3-line"></i>
        </button>
        <button class="btn-icon" id="profileBtn" title="حسابي">
          <i class="ri-user-line"></i>
        </button>
      </div>
    </nav>

    <!-- القائمة الجانبية -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h3>الأقسام</h3>
        <button class="btn-icon" id="closeSidebar">
          <i class="ri-close-line"></i>
        </button>
      </div>
      <nav class="sidebar-nav">
        <a href="#" class="sidebar-item" data-nav="home">
          <i class="ri-home-5-line"></i>
          <span>الرئيسية</span>
        </a>
        <a href="#" class="sidebar-item" data-nav="categories">
          <i class="ri-apps-line"></i>
          <span>التصنيفات</span>
        </a>
        <a href="#" class="sidebar-item" data-nav="manga-list">
          <i class="ri-book-2-line"></i>
          <span>قائمة المانغا</span>
        </a>
        <a href="#" class="sidebar-item" data-nav="library">
          <i class="ri-bookmark-line"></i>
          <span>المكتبة</span>
        </a>
        <a href="#" class="sidebar-item" data-nav="account">
          <i class="ri-user-line"></i>
          <span>الحساب</span>
        </a>
        <a href="#" class="sidebar-item" data-nav="settings">
          <i class="ri-settings-3-line"></i>
          <span>الإعدادات</span>
        </a>
        <div class="sidebar-divider"></div>
        <a href="#" class="sidebar-item" data-nav="admin-panel" id="adminPanelLink" hidden>
          <i class="ri-admin-line"></i>
          <span>لوحة التحكم</span>
        </a>
      </nav>
    </aside>

    <!-- العروض/الصفحات -->
    <main class="main-content">
      <!-- الصفحة: الرئيسية -->
      <section class="view active" data-view="home">
        <div class="section-header">
          <h2>آخر الفصول المضافة</h2>
          <button class="btn-icon" id="menuToggle">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        <div class="chapters-grid" id="latestChapters"></div>
      </section>

      <!-- الصفحة: التصنيفات -->
      <section class="view" data-view="categories">
        <div class="section-header">
          <h2>التصنيفات</h2>
          <button class="btn-icon" id="menuToggleCategories">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        <div class="categories-grid" id="categoriesGrid"></div>
      </section>

      <!-- الصفحة: قائمة المانغا -->
      <section class="view" data-view="manga-list">
        <div class="section-header">
          <h2>قائمة المانغا</h2>
          <button class="btn-icon" id="menuToggleMangaList">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        <div class="manga-grid" id="allMangaGrid"></div>
      </section>

      <!-- الصفحة: المكتبة -->
      <section class="view" data-view="library">
        <div class="section-header">
          <h2>المكتبة الشخصية</h2>
          <button class="btn-icon" id="menuToggleLibrary">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        
        <div class="tabs">
          <button class="tab active" data-tab="saved">المحفوظات</button>
          <button class="tab" data-tab="continue">أكمل القراءة</button>
          <button class="tab" data-tab="history">سجل المشاهدة</button>
        </div>

        <div class="tab-content active" data-content="saved">
          <div class="manga-grid" id="savedManga"></div>
        </div>

        <div class="tab-content" data-content="continue">
          <div class="chapters-grid" id="continueReading"></div>
        </div>

        <div class="tab-content" data-content="history">
          <div class="chapters-grid" id="readingHistory"></div>
        </div>
      </section>

      <!-- الصفحة: الحساب -->
      <section class="view" data-view="account">
        <div class="section-header">
          <h2>حسابي</h2>
          <button class="btn-icon" id="menuToggleAccount">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        
        <div class="profile-card">
          <div class="profile-row">
            <div class="avatar" id="profileAvatar">U</div>
            <div>
              <h3 id="profileName">زائر</h3>
              <p class="muted" id="profileRole">Guest</p>
            </div>
          </div>
          <div class="stats" id="profileStats"></div>
          <div class="profile-actions" id="profileActions">
            <button class="btn-secondary" id="openLogin">تسجيل الدخول</button>
            <button class="btn-primary" id="openRegister">إنشاء حساب</button>
          </div>
        </div>

        <div class="team-profile card" id="teamProfile" hidden>
          <!-- محتوى بروفايل الفريق -->
        </div>
      </section>

      <!-- الصفحة: الإعدادات -->
      <section class="view" data-view="settings">
        <div class="section-header">
          <h2>الإعدادات</h2>
          <button class="btn-icon" id="menuToggleSettings">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        
        <div class="settings-list card">
          <div class="setting-item">
            <div class="setting-info">
              <i class="ri-moon-line"></i>
              <span>الوضع الليلي</span>
            </div>
            <label class="switch">
              <input type="checkbox" id="darkModeToggle" checked>
              <span class="slider"></span>
            </label>
          </div>
          
          <div class="setting-item">
            <div class="setting-info">
              <i class="ri-download-line"></i>
              <span>التنزيل التلقائي</span>
            </div>
            <label class="switch">
              <input type="checkbox" id="autoDownloadToggle">
              <span class="slider"></span>
            </label>
          </div>
          
          <div class="setting-item">
            <div class="setting-info">
              <i class="ri-wifi-line"></i>
              <span>القراءة بدون اتصال</span>
            </div>
            <label class="switch">
              <input type="checkbox" id="offlineReadingToggle">
              <span class="slider"></span>
            </label>
          </div>
          
          <div class="setting-item">
            <div class="setting-info">
              <i class="ri-notification-line"></i>
              <span>الإشعارات</span>
            </div>
            <label class="switch">
              <input type="checkbox" id="notificationsToggle" checked>
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </section>

      <!-- الصفحة: لوحة التحكم (للمسؤول) -->
      <section class="view" data-view="admin-panel">
        <div class="section-header">
          <h2>لوحة التحكم</h2>
          <button class="btn-icon" id="menuToggleAdmin">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        
        <div class="admin-dashboard">
          <div class="admin-stats">
            <div class="admin-stat">
              <div class="stat-value" id="totalManga">0</div>
              <div class="stat-label">المانغا</div>
            </div>
            <div class="admin-stat">
              <div class="stat-value" id="totalChapters">0</div>
              <div class="stat-label">الفصول</div>
            </div>
            <div class="admin-stat">
              <div class="stat-value" id="totalUsers">0</div>
              <div class="stat-label">المستخدمين</div>
            </div>
            <div class="admin-stat">
              <div class="stat-value" id="totalTeams">0</div>
              <div class="stat-label">الفرق</div>
            </div>
          </div>
          
          <div class="admin-actions">
            <h3>الإجراءات السريعة</h3>
            <div class="action-buttons">
              <button class="btn-primary" id="addMangaBtn">
                <i class="ri-add-line"></i> إضافة مانغا
              </button>
              <button class="btn-primary" id="addChapterBtn">
                <i class="ri-file-add-line"></i> إضافة فصل
              </button>
              <button class="btn-secondary" id="manageUsersBtn">
                <i class="ri-user-settings-line"></i> إدارة المستخدمين
              </button>
              <button class="btn-secondary" id="manageTeamsBtn">
                <i class="ri-team-line"></i> إدارة الفرق
              </button>
            </div>
          </div>
          
          <div class="recent-activity card">
            <h3>آخر النشاطات</h3>
            <div class="activity-list" id="adminActivityList"></div>
          </div>
        </div>
      </section>

      <!-- الصفحة: القارئ -->
      <section class="view reader-view" data-view="reader">
        <div class="reader-topbar">
          <button class="btn-icon" data-action="back-from-reader" title="رجوع">
            <i class="ri-arrow-right-line"></i>
          </button>
          <div class="reader-titles">
            <strong id="readerMangaTitle">—</strong>
            <span class="muted" id="readerChapterTitle">—</span>
          </div>
          <div class="reader-actions">
            <button class="btn-icon" id="zoomOut" title="تصغير"><i class="ri-zoom-out-line"></i></button>
            <button class="btn-icon" id="zoomIn" title="تكبير"><i class="ri-zoom-in-line"></i></button>
            <button class="btn-icon" id="fitMode" title="ملاءمة"><i class="ri-aspect-ratio-line"></i></button>
            <button class="btn-icon" id="toggleTheme" title="وضع الليل"><i class="ri-moon-line"></i></button>
            <button class="btn-icon" id="prevChapter" title="السابق"><i class="ri-arrow-left-line"></i></button>
            <button class="btn-icon" id="nextChapter" title="التالي"><i class="ri-arrow-right-line"></i></button>
            <button class="btn-icon" id="readerSettings" title="الإعدادات"><i class="ri-settings-3-line"></i></button>
          </div>
        </div>
        <div class="reader-canvas" id="readerCanvas"></div>
      </section>

      <!-- الصفحة: البحث -->
      <section class="view" data-view="search">
        <div class="section-header">
          <h2>البحث</h2>
          <button class="btn-icon" id="menuToggleSearch">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        
        <div class="search-panel card">
          <div class="search-row">
            <input id="searchInput" type="text" placeholder="ابحث عن عنوان أو فريق..." />
            <button class="btn-primary" id="searchBtnMain"><i class="ri-search-2-line"></i> بحث</button>
          </div>
          <div class="filters-row">
            <select id="filterStatus">
              <option value="">الحالة</option>
              <option value="ongoing">مستمر</option>
              <option value="completed">مكتمل</option>
              <option value="hiatus">متوقف</option>
            </select>
            <select id="filterType">
              <option value="">النوع</option>
              <option value="manga">Manga</option>
              <option value="manhwa">Manhwa</option>
              <option value="manhua">Manhua</option>
              <option value="webtoon">Webtoon</option>
            </select>
            <select id="filterGenre">
              <option value="">التصنيف</option>
              <option value="أكشن">أكشن</option>
              <option value="رومانسي">رومانسي</option>
              <option value="كوميدي">كوميدي</option>
              <option value="خيال علمي">خيال علمي</option>
              <option value="رعب">رعب</option>
              <option value="دراما">دراما</option>
              <option value="غموض">غموض</option>
              <option value="فانتازيا">فانتازيا</option>
              <option value="شوجو">شوجو</option>
              <option value="شونين">شونين</option>
            </select>
          </div>
        </div>
        
        <div class="section-header">
          <h2>نتائج البحث</h2>
        </div>
        <div class="manga-grid" id="searchResults"></div>
      </section>
    </main>

    <!-- شريط التنقل السفلي -->
    <nav class="bottom-nav">
      <a href="#" class="nav-item active" data-nav="home">
        <i class="ri-home-5-line"></i>
        <span>الرئيسية</span>
      </a>
      <a href="#" class="nav-item" data-nav="categories">
        <i class="ri-apps-line"></i>
        <span>الأقسام</span>
      </a>
      <a href="#" class="nav-item" data-nav="manga-list">
        <i class="ri-book-2-line"></i>
        <span>المانغا</span>
      </a>
      <a href="#" class="nav-item" data-nav="library">
        <i class="ri-bookmark-line"></i>
        <span>المكتبة</span>
      </a>
      <a href="#" class="nav-item" data-nav="account">
        <i class="ri-user-line"></i>
        <span>حسابي</span>
      </a>
    </nav>
  </div>

  <!-- نوافذ التسجيل -->
  <div class="modal" id="loginModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>تسجيل الدخول</h2>
        <button class="close-modal" data-close="loginModal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="loginForm">
          <div class="form-group">
            <label for="email">البريد الإلكتروني</label>
            <input type="email" id="email" required />
          </div>
          <div class="form-group">
            <label for="password">كلمة المرور</label>
            <input type="password" id="password" required />
          </div>
          <button type="submit" class="btn-primary full-width">تسجيل الدخول</button>
        </form>
        <p class="auth-switch">ليس لديك حساب؟ <a href="#" id="showRegister">سجل الآن</a></p>
      </div>
    </div>
  </div>

  <div class="modal" id="registerModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>إنشاء حساب جديد</h2>
        <button class="close-modal" data-close="registerModal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="registerForm">
          <div class="form-group">
            <label for="regUsername">اسم المستخدم</label>
            <input type="text" id="regUsername" required />
          </div>
          <div class="form-group">
            <label for="regEmail">البريد الإلكتروني</label>
            <input type="email" id="regEmail" required />
          </div>
          <div class="form-group">
            <label for="regPassword">كلمة المرور</label>
            <input type="password" id="regPassword" required />
          </div>
          <div class="form-group">
            <label for="userType">نوع الحساب</label>
            <select id="userType">
              <option value="reader">قارئ</option>
              <option value="team">فريق ترجمة</option>
              <option value="creator">صانع محتوى</option>
            </select>
          </div>
          <button type="submit" class="btn-primary full-width">إنشاء حساب</button>
        </form>
        <p class="auth-switch">لديك حساب بالفعل؟ <a href="#" id="showLogin">تسجيل الدخول</a></p>
      </div>
    </div>
  </div>

  <!-- نافذة إضافة مانغا (للمسؤول) -->
  <div class="modal" id="addMangaModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>إضافة مانغا جديدة</h2>
        <button class="close-modal" data-close="addMangaModal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="addMangaForm">
          <div class="form-group">
            <label for="mangaTitle">عنوان المانغا</label>
            <input type="text" id="mangaTitle" required />
          </div>
          <div class="form-group">
            <label for="mangaDescription">وصف المانغا</label>
            <textarea id="mangaDescription" rows="3"></textarea>
          </div>
          <div class="form-group">
            <label for="mangaCover">رابط الغلاف</label>
            <input type="url" id="mangaCover" required />
          </div>
          <div class="form-group">
            <label for="mangaStatus">الحالة</label>
            <select id="mangaStatus">
              <option value="ongoing">مستمر</option>
              <option value="completed">مكتمل</option>
              <option value="hiatus">متوقف</option>
            </select>
          </div>
          <div class="form-group">
            <label for="mangaType">النوع</label>
            <select id="mangaType">
              <option value="manga">Manga</option>
              <option value="manhwa">Manhwa</option>
              <option value="manhua">Manhua</option>
              <option value="webtoon">Webtoon</option>
            </select>
          </div>
          <div class="form-group">
            <label for="mangaRating">التقييم العالمي (1-10)</label>
            <input type="number" id="mangaRating" min="1" max="10" step="0.1" />
          </div>
          <div class="form-group">
            <label for="mangaAuthor">المؤلف</label>
            <input type="text" id="mangaAuthor" />
          </div>
          <div class="form-group">
            <label for="mangaArtist">الرسام</label>
            <input type="text" id="mangaArtist" />
          </div>
          <button type="submit" class="btn-primary full-width">إضافة المانغا</button>
        </form>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/@supabase/supabase-js"></script>
  <script src="app.js"></script>
</body>
</html>